[supervisord]
nodaemon=true
user=root
loglevel=info
logfile=/var/log/supervisord.log
logfile_maxbytes=50MB
logfile_backups=10

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
stderr_logfile=/var/log/nginx.err.log
stdout_logfile=/var/log/nginx.out.log
stderr_logfile_maxbytes=10MB
stdout_logfile_maxbytes=10MB
stderr_logfile_backups=5
stdout_logfile_backups=5
redirect_stderr=false

[program:reflex-backend]
command=uv run reflex run --env prod --backend-only
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/reflex.err.log
stdout_logfile=/var/log/reflex.out.log
stderr_logfile_maxbytes=10MB
stdout_logfile_maxbytes=10MB
stderr_logfile_backups=5
stdout_logfile_backups=5
redirect_stderr=false
environment=LLM_SERVICE_URL="%(ENV_LLM_SERVICE_URL)s"
